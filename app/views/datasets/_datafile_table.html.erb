<table class="dgu-datafiles">
  <tr>
    <th class="title small"><%= t('datasets.show.link_to_data') %></th>
    <th><%= t('datasets.show.format') %></th>
    <th><%= t('datasets.show.last_updated') %></th>
    <th><%= t('datasets.show.data_preview') %></th>
  </tr>
  <tbody>
    <% datafiles.each do |datafile| %>
      <tr>
        <td class="title small">
          <%= link_to (datafile.name ? datafile.name : t('datasets.show.data_link')),
              datafile.url,
              :data => {:'ga-event' => "datafile-download"}
          %>
        </td>
        <% if datafile.format.blank? %>
          <td class="dgu-unavailable">N/A</td>
        <% else %>
          <td><%= datafile.format.upcase %>
          <% if datafile.size %>
            (<%= datafile.size %> kB)
          <% end %>
          </td>
        <% end %>

        <% if datafile.updated_at.present? %>
          <td><%= format(datafile.updated_at) %></td>
        <% else %>
          <td class="dgu-unavailable"><%= t('datasets.show.not_available') %></td>
        <% end %>
          <td class="datafiles__preview">
            <% if datafile.html? %>
              <%= link_to t('datasets.show.go_to_site'), datafile.url %>
            <% elsif datafile.csv? %>
              <span class="dgu-unavailable"><%= t('datasets.show.coming_soon') %></span>
            <% else %>
              <span class="dgu-unavailable"><%= t('datasets.show.not_available') %></span>
            <% end %>
          </td>
        </tr>
      <% end %>
  </tbody>
</table>
